<link rel="stylesheet" href="{{url_for('static',filename='css/tablecomponent.css')}}">

{% macro render_table(data, actions=True, table_classes="table table-striped table-hover table-bordered", action_buttons=None, identifier_key='id', url_patterns=None) %}
  <div class="container mt-5 table-responsive">
    {% if data %}
      <table class="{{ table_classes }} custom-table-card">
        <thead class="table-primary">
          <tr>
            {% for key in data[0].keys() %}
              <th class="text-center">{{ key | title }}</th>
            {% endfor %}
            {% if actions %}
              <th class="text-center">Actions</th>
            {% endif %}
          </tr>
        </thead>

        <tbody>
          {% for row in data %}
            <tr>
              {% for key, value in row.items() %}
                <td class="text-center">{{ value }}</td>
              {% endfor %}
              {% if actions %}
                <td class="text-center">
                  <div class="d-flex justify-content-center">
                    {% if action_buttons and url_patterns %}
                      {% for button in action_buttons %}
                        <a 
                          href="{{ url_for(url_patterns[button['endpoint']], **{identifier_key: row[identifier_key]}) }}" 
                          class="btn btn-clean btn-clean-{{ button['type'] }} me-2"
                          {% if button.get('title') %} title="{{ button['title'] }}" {% endif %}
                        >
                          {{ button['label'] }}
                        </a>
                      {% endfor %}
                    {% else %}
                      <!-- Default action buttons if no action_buttons or url_patterns are provided -->
                      {% if url_patterns %}
                        <a href="{{ url_for(url_patterns['edit'], **{identifier_key: row[identifier_key]}) }}" 
                           class="btn btn-clean btn-clean-edit me-2" 
                           title="Edit this entry">
                           Edit
                        </a>
                        <a href="{{ url_for(url_patterns['delete'], **{identifier_key: row[identifier_key]}) }}" 
                           class="btn btn-clean btn-clean-delete me-2" 
                           title="Delete this entry">
                           Delete
                        </a>
                      {% else %}
                        <span class="text-muted">No actions available</span>
                      {% endif %}
                    {% endif %}
                  </div>
                </td>
              {% endif %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-center mt-4">No data available to display.</p>
    {% endif %}
  </div>
{% endmacro %}
